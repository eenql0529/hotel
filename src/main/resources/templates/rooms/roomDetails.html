<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}">

<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />

<th:block layout:fragment="css">
	<style>
	
.amenitiesDetail > ul {
display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
}	
	
.amenitiesDetail > ul > li{
	max-width: 750px;
	display: flex;
    flex-direction: column;
    align-items: center;
}
	
.contents {
	font-family: suit !important;
}

.a_type {
	margin-top: 50px;
	margin-bottom: 80px;
}

.a_stit {
	font-size: 15px;
	font-weight: 700;
	color: #707079;
	margin-bottom: 10px;
}

.a_type>ul {
	color: #707079;
	list-style-position: inside;
}

.a_notice {
	margin-top: 50px;
	margin-bottom: 50px;
}

.amenitiesTitle>p {
	font-size: 25px;
	font-weight: 700;
	border-bottom: 1px solid #e5e5e5;
	margin-top: 50px;
	margin-bottom: 50px;
}

/* .amenitiesDetail {
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	align-items: stretch;
	justify-content: center;
} */

/* .amenitiesDetail>div {
	width: 250px;
	margin-right: 50px;
	margin-bottom: 40px !important;
}

.amenitiesDetail>div>p {
	text-align: center;
} */
html, body {
	position: relative;
	height: 100%;
}

body {
	background: #fff;
	font-size: 14px;
	color: #000;
	margin: 0;
	padding: 0;
}

.swiper {
	width: 100%;
	height: 100%;
}

.swiper-slide {
	text-align: center;
	font-size: 18px;
	background: #fff;
	display: flex;
	justify-content: center;
	align-items: center;
}

.swiper-slide img {
	display: block;
	width: 100%;
	height: 100%;
	object-fit: cover;
}
</style>
</th:block>

<div layout:fragment="content">
	<!-- Breadcrumb Section Begin -->
	<div class="breadcrumb-section">
		<div class="container">
			<div class="row">
				<input type="hidden" id="typeId" th:value="${rooms.id}">
				<div class="col-lg-12">
					<div class="breadcrumb-text">
						<h2>Our Rooms</h2>
						<div class="bt-option">
							<a href="./home.html">Home</a> <span>Rooms</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Breadcrumb Section End -->

	<!-- Room Details Section Begin -->
	<section class="room-details-section spad">
		<div class="container">
			<div class="row">
				<div class="col-lg-8">
					<div class="room-details-item">
						<!-- Swiper -->

						<div class="swiper mySwiper">
							<div class="swiper-wrapper">
								<div class="swiper-slide"
									th:each="room : ${rooms.roomImgDtoList}">
									<img th:if="${room.imgUrl != null and !room.imgUrl.isEmpty()}"
										th:src="${room.imgUrl}" alt="">
								</div>

							</div>
							<div class="swiper-button-next"></div>
							<div class="swiper-button-prev"></div>
						</div>

						<div class="rd-text">
							<div class="rd-title">
								<h3 th:text="${rooms.typeName}">Premium King Room</h3>
								<div class="rdt-right">
									<div class="rating">
										<i class="icon_star"></i> <i class="icon_star"></i> <i
											class="icon_star"></i> <i class="icon_star"></i> <i
											class="icon_star-half_alt"></i>
									</div>
									<a href="#">Booking Now</a>
								</div>
							</div>
							<h2 style="font-size: 20px;">
								[[${#numbers.formatInteger(rooms.price, 0, 'COMMA')}]]원<span>/Pernight</span>
							</h2>
							<table>
								<tbody>
									<tr>
										<td class="r-o">Size:</td>
										<td th:text="${rooms.roomSize}">30 ft</td>
									</tr>
									<tr>
										<td class="r-o">Capacity:</td>
										<td th:text="${rooms.capacity}">Max persion 5</td>
									</tr>
									<tr>
										<td class="r-o">Bed:</td>
										<td th:text="${rooms.bedType}">King Beds</td>
									</tr>

								</tbody>
							</table>
							<div class="f-para" th:text="${rooms.roomDetail}"
								style="font-weight: 500; color: #DFA974;"></div>


							<div class="amenitiesTitle">
								<p>Amenities</p>
							</div>

							<div class="amenitiesDetail" th:utext="${rooms.amenities}"
								style="display: flex; flex-direction: row;"></div>

						</div>
					</div>

					<div class="a_notice">
						※ 모든 고객의 편안한 휴식을 위하여 전 객실 금연입니다.<br> ※ 객실에서 흡연 시(IQOS담배, 전자담배
						포함) 10만원의 과태료가 부과됩니다.<br> ※ 객실내 애완동물의 출입 및 동반 투숙이 불가 합니다.<br>
						※ 화재 예방을 위하여 객실 내에서는 촛불, 가스, 유류 등의 인화성 물질과 난방/취사를 위한 화기 및 전열기구에 대한
						일체 사용을 엄격히 금지합니다.<br>
						<!--※ LED형 초는 컨시어지에서 대여 가능하오니 사전 문의(컨시어지:032-743-9120) 주시기 바랍니다.<br/>-->
						※ 고객님 편의를 위해 생수 1병을 추가로 무료 제공합니다.<br> ※ 전 객실에 손소독제 및 소독솜 등을
						무료로 제공합니다.<br> ※ 네스트 킷 구성 : 렌즈&amp;스마트폰 클리닝 티슈, 소독솜, 일회용 밴드<br>(LENS
						&amp; SMARTPHONE CLEANING TISSUE / ALCOHOL SWAB / DISPOSABLE BAND)<br>

					</div>
					<div class="rd-reviews">
						<h4>Reviews</h4>
						<div class="review-item">
							<div class="ri-pic">
								<img src="img/room/avatar/avatar-1.jpg" alt="">
							</div>
							<div class="ri-text">
								<span>27 Aug 2019</span>
								<div class="rating">
									<i class="icon_star"></i> <i class="icon_star"></i> <i
										class="icon_star"></i> <i class="icon_star"></i> <i
										class="icon_star-half_alt"></i>
								</div>
								<h5>Brandon Kelley</h5>
								<p>Neque porro qui squam est, qui dolorem ipsum quia dolor
									sit amet, consectetur, adipisci velit, sed quia non numquam
									eius modi tempora. incidunt ut labore et dolore magnam.</p>
							</div>
						</div>
						<div class="review-item">
							<div class="ri-pic">
								<img src="img/room/avatar/avatar-2.jpg" alt="">
							</div>
							<div class="ri-text">
								<span>27 Aug 2019</span>
								<div class="rating">
									<i class="icon_star"></i> <i class="icon_star"></i> <i
										class="icon_star"></i> <i class="icon_star"></i> <i
										class="icon_star-half_alt"></i>
								</div>
								<h5>Brandon Kelley</h5>
								<p>Neque porro qui squam est, qui dolorem ipsum quia dolor
									sit amet, consectetur, adipisci velit, sed quia non numquam
									eius modi tempora. incidunt ut labore et dolore magnam.</p>
							</div>
						</div>
					</div>
					<div class="review-add">
						<h4>Add Review</h4>
						<form action="#" class="ra-form">
							<div class="row">
								<div class="col-lg-6">
									<input type="text" placeholder="Name*">
								</div>
								<div class="col-lg-6">
									<input type="text" placeholder="Email*">
								</div>
								<div class="col-lg-12">
									<div>
										<h5>You Rating:</h5>
										<div class="rating">
											<i class="icon_star"></i> <i class="icon_star"></i> <i
												class="icon_star"></i> <i class="icon_star"></i> <i
												class="icon_star-half_alt"></i>
										</div>
									</div>
									<textarea placeholder="Your Review"></textarea>
									<button type="submit">Submit Now</button>
								</div>
							</div>
						</form>
					</div>
				</div>
				<div class="col-lg-4">
					<div class="room-booking">
						<h3>Your Reservation</h3>
						<form action="#">
							<div class="check-date">
								<label for="date-in">Check In:</label> <input type="text"
									class="date-input" id="date-in"> <i
									class="icon_calendar"></i>
							</div>
							<div class="check-date">
								<label for="date-out">Check Out:</label> <input type="text"
									class="date-input" id="date-out"> <i
									class="icon_calendar"></i>
							</div>
							<div class="select-option">
								<label for="guest">Guests:</label> <select id="guest">
									<option value="1">1 Adults</option>
									<option value="2">2 Adults</option>
									<option value="3">3 Adults</option>
								</select>
							</div>

							<button type="button" onclick="order()">Check
								Availability</button>
							<input type="hidden" th:name="${_csrf.parameterName}"
								th:value="${_csrf.token}">
						</form>
					</div>

				</div>
			</div>

		</div>
	</section>
	<!-- Room Details Section End -->

</div>
<th:block layout:fragment="script">
	<script th:inline="javascript">
	<!-- Swiper JS -->
		var swiper = new Swiper(".mySwiper", {
			slidesPerView : 1, // 한 슬라이드에 보여줄 갯수
			loop : false,
			cssMode : true,
			navigation : {
				nextEl : ".swiper-button-next",
				prevEl : ".swiper-button-prev",
			},
			pagination : {
				el : ".swiper-pagination",
			},
			mousewheel : true,
			keyboard : true,
		});

		function order() {
			var token = $("meta[name='_csrf']").attr("content");
			alert('111111111');
			var header = $("meta[name='_csrf_header']").attr("content");
			alert('222222222');
			var url = "/rooms/reserve";
			alert('33333333333');
			//controller(서버)에 전달할 데이터
			var paramData = {
				itemId : $("#typeId").val(), //item의 id

			}

			//★전달하기 전에 데이터를 반드시 JSON -> 문자열로 만들어야 한다.
			var param = JSON.stringify(paramData);

			$.ajax({
				url : url, //request URL
				type : "POST", //전송방식
				contentType : "application/json",
				data : param, //서버에 전송할 데이터
				beforeSend : function(xhr) {
					//데이터를 전송하기전에 헤더에 csrf 값을 설정
					xhr.setRequestHeader(header, token);
				},
				dataType : "json",
				cache : false,
				success : function(result, status) {
					alert("주문이 완료 되었습니다." + result);
					//location.href = '/';
				},
				error : function(jqXHR, status, error) {
					if (jqXHR.status == '401') {
						alert('로그인 후 이용해주세요.');
						location.href = '/members/login';
					} else {
						//에러메세지 출력(ResponseEntity에서 받아온 값을 출력해준다)
						alert(jqXHR.responseText);
					}
				}
			});

		}
	</script>
</th:block>
</html>